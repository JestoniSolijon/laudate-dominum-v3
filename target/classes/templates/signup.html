<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  <title>Title</title>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


  <style>
    .toggle-password {
    float: right;
    cursor: pointer;
    margin-right: 10px;
    margin-top: -25px;
}
  </style>
</head>
<body>

<div class="container ">

  <div class="row">

    <div class="col-md-7 d-flex justify-content-center vh-100 flex-column">
      <div class="mb-5">
        <h1>Signup</h1>
        <span class="text-muted">Enter your details to create your Laudate Dominum account:</span>
      </div>
      <div class="row">
        <form class="row w-75" th:action="@{/signup}" th:object="${users}" method="POST">
          <div class="col-md-6 mb-4">
            <label for="firstname" class="form-label">First Name <span class="text-danger"> *</span></label>
            <input type="text" id="firstname" class="form-control" name="firstName" th:field="*{firstName}">
            <span th:if="${#fields.hasErrors('firstName')}"
                  th:errors="*{firstName}"
                  class="text-danger fst-italic"
                  style="font-size: 13px">
            </span>
          </div>
          <div class="col-md-6 mb-4">
            <label for="lastname" class="form-label">Last Name <span class="text-danger"> *</span></label>
            <input type="text" id="lastname" class="form-control" name="lastName" th:field="*{lastName}">
            <span th:if="${#fields.hasErrors('lastName')}"
                  th:errors="*{lastName}"
                  class="text-danger fst-italic"
                  style="font-size: 13px">
            </span>
          </div>
          <div class="mb-4">
            <label for="email-address" class="form-label">Email Address <span class="text-muted fst-italic"> <small>(optional)</small></span></label>
            <input type="text" id="email-address" class="form-control" name="emailAddress" th:field="*{emailAddress}">
            <span th:if="${#fields.hasErrors('emailAddress')}"
                  th:errors="*{emailAddress}"
                  class="text-danger fst-italic"
                  style="font-size: 13px">
            </span>
          </div>
          <div class="mb-4">
            <label for="phone-number" class="form-label">Phone Number <span class="text-danger"> *</span></label>
            <input type="text" id="phone-number" class="form-control" name="phoneNumber" th:field="*{phoneNumber}">
            <span th:if="${#fields.hasErrors('phoneNumber')}"
                  th:errors="*{phoneNumber}"
                  class="text-danger fst-italic"
                  style="font-size: 13px">
            </span>
          </div>
          <div class="col-md-6 mb-4">
            <label for="username" class="form-label">Username <span class="text-danger"> *</span></label>
            <input type="text" id="username" class="form-control" name="userName" th:field="*{userName}">
            <span th:if="${#fields.hasErrors('userName')}"
                  th:errors="*{userName}"
                  class="text-danger fst-italic"
                  style="font-size: 13px">
            </span>

            <div th:if="${userExist == true}">
              <span class="text-danger fst-italic" style="font-size: 13px">Username is currently unavailable. Please select a different one.</span>
            </div>
          </div>

          <div class="col-md-6 mb-4">
            <label for="username" class="form-label">Password <span class="text-danger"> *</span></label>
            <div class="input-group flex-nowrap">
              <input type="text" class="form-control border-end-0" name="password" th:field="*{password}" aria-label="Password">
              <button type="button" class="input-group-text bg-transparent border-start-0" id="addon-wrapping">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash-fill" viewBox="0 0 16 16">
                  <path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"/>
                  <path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z"/>
                </svg>
              </button>

            </div>
            <span th:if="${#fields.hasErrors('password')}"
                  th:errors="*{password}"
                  class="text-danger fst-italic"
                  style="font-size: 13px">
            </span>
          </div>

          <div class="col-md-12 mb-4 form-check">
            <input type="checkbox" class="form-check-input" id="exampleCheck1">
            <label class="form-check-label" for="exampleCheck1">Check me out</label>
          </div>
          <div class="mb-3">
            <button type="submit" class="btn btn-primary">Sign up</button>
          </div>
          <div>
            <span class="fst-italic text-muted" >Already have an Account? <a th:href="@{/login}">Log in</a></span>
          </div>
        </form>
      </div>
    </div>
    <div class="col-md-5 bg-light">
    </div>
  </div>
</div>

<script>


let passwordInput = document.getElementById('txtPassword'),
    toggle = document.getElementById('btnToggle'),
    icon =  document.getElementById('eyeIcon');

function togglePassword() {
  if (passwordInput.type === 'password') {
    passwordInput.type = 'text';
    icon.classList.add("fa-eye-slash");
    //toggle.innerHTML = 'hide';
  } else {
    passwordInput.type = 'password';
    icon.classList.remove("fa-eye-slash");
    //toggle.innerHTML = 'show';
  }
}

toggle.addEventListener('click', togglePassword, false);
passwordInput.addEventListener('keyup', checkInput, false);

</script>
</body>
</html>